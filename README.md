# logger

## Описание

Это внешний логгер. Перенаправьте консольный вывод вашей программы на этот скрипт, и вы получите логирование с разбивкой на файлы исходя из указанного ограничения на размер файла лога, и с перезатиранием наиболее старых логов исходя из указанного ограничения на количество файлов логов.

НО! Указание времени записи - это ваша забота - в файл пишется строго то, что вы выводите в консоль.
Для вставки даты в логи можно использовать скрипт *insert-datetime.sh* (см. ниже пример). Запустите с ключом "--help" для справки (вводите что-нибудь, и будете видеть то же самое с датой, выход по Ctrl+C).

Менять местоположение логов (и вообще параметров логирования) можно не останавливая сервер: внесите нужные изменения в logger.conf . Но если меняете директорию для логов, позаботьтесь о том, чтобы она была пуста до перевода логирования на ту директорию (чтобы там не было предыдущих логов).


Как это использовать:
```bash
./my-beautiful-server 2>&1 | ../logger/logger.sh ./logger.conf
```
Здесь мы в файл пишем как стандартный вывод(stdout), так и вывод ошибок(stderr).
```bash
./my-beautiful-server 2>&1 | ../logger/insert-datetime.sh | ../logger/logger.sh ./logger.conf
```
Здесь мы также к каждой строке приписываем дату и время записи

```bash
logger.sh [--help] [--generate-config <FILENAME>] [--config <FILENAME>]
Valid arguments:
--help
--generate-config <FILENAME>
--config <FILENAME>  - use FILENAME as logger.sh config

Generate config first. Then change that config (if needed) and use it.
```


## Тестирование
cd test && ./test.sh
Скрипт с тестом корректно работает только из директории test.

## Настройки
Вот пример файла logger.conf:
```bash
print_to_tty=true
log_dir=./logs
log_file_name_base=test
log_file_limit=200 # in bytes
log_files_limit=20
```

## Системные требования
Требуется наличие в системе BASH. В Linux-е он не всегда изначально есть, лучше это проверить. В Windows достаточно установить "git" - это установщик ставит и bash, и все необходимые системные утилиты (используйте меню "git bash here").

Не забудьте перед использованием запустить тест (см. Тестирование) - это для гарантии того, что необходимые для работы логера системные утилиты в системе есть и работают так, как ожидается.
