# logger

## Описание

Это внешний логгер. Перенаправьте консольный вывод вашей программы на этот скрипт, и вы получите логирование с разбивкой на файлы исходя из указанного ограничения на размер файла лога, и с перезатиранием наиболее старых логов исходя из указанного ограничения на количество файлов логов.

НО! Указание времени записи - это ваша забота - в файл пишется строго то, что вы выводите в консоль.

Менять местоположение логов (и вообще параметров логирования) можно не останавливая сервер: внесите нужные изменения в logger.conf . Но если меняете директорию для логов, позаботьтесь о том, чтобы она была пуста до перевода логирования на ту директорию (чтобы там не было предыдущих логов).


Как это использовать:
```bash
./my-beautifulserver 2>&1 | ../logger/logger.sh ./logger.conf
```
Здесь мы в файл пишем как стандартный вывод(stdout), так и вывод ошибок(stderr).

```bash
logger.sh [--help] [--generate-config <FILENAME>] [--config <FILENAME>]
Valid arguments:
--help
--generate-config <FILENAME>
--config <FILENAME>  - use FILENAME as logger.sh config

Generate config first. Then change that config (if needed) and use it.
```


## Тестирование
```bash
./test.sh | ./logger.sh
```

## Настройки
Вот пример файла logger.conf:
```bash
print_to_tty=true
log_dir=./logs
log_file_name_base=test
log_file_limit=200 # in bytes
log_files_limit=20
```

## Недоделки и баги
* Переполнение по количеству файлов логов (переписывание старых при переполнении) ещё не отлажено
* Добавить встроенное тестирование на соответствие ожидаемому поведение используемых системных утилит (и их наличию!)

## Системные требования
Требуется наличие в системе BASH. В Linux-е он не всегда изначально есть, лучше это проверить. В Windows достаточно установить "git" - это установщик ставит и bash, и все необходимые системные утилиты (используйте меню "git bash here").
